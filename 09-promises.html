<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promises</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/theme/dracula.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/monokai.min.css" />
    <style>
        pre code {
            /* font-size: 1.3em !important;
            white-space: pre-wrap !important;
            word-wrap: break-word !important; */
            width: 100%;
            font-size: 17px;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            
            <!-- Portada -->
            <section>
                <h2>Promises</h2>
                <p>Semestre 1, 2025</p>
            </section>

            <!-- Introducci√≥n -->
            <section>
                <section>
                    <h2>Introducci√≥n</h2>
                </section>
                <section>
                    <p>JavaScript es un lenguaje as√≠ncrono y no bloqueante.</p>
                </section>
                <section>
                    <p>Ejemplo de c√≥digo bloqueante:</p>
                    <pre><code class="javascript">
console.log("Inicio");
alert("Bloqueo del c√≥digo");
console.log("Fin");</code></pre>
                </section>
                <section>
                    <h3>¬øQu√© es la asincron√≠a?</h3>
                </section>
                <section>
                    <p>La asincron√≠a permite ejecutar c√≥digo sin bloquear la ejecuci√≥n de otras tareas.</p>
                </section>
                <section>
                    <p>Ejemplo de asincron√≠a en la vida real: Mientras esperas una pizza en un restaurante, puedes hacer otras cosas sin quedarte inm√≥vil.</p>
                </section>
                <section>
                    <p>En JavaScript, esto se maneja con:</p>
                    <ul>
                        <li>Callbacks</li>
                        <li>Promesas</li>
                        <li>Async/Await</li>
                    </ul>
                </section>                
                <section>
                    <p>El manejo incorrecto de la asincron√≠a puede afectar el rendimiento y la experiencia del usuario.</p>
                </section>
            </section>

            <!-- Problema -->
            <section>
                <section>
                    <h2>Problema</h2>
                </section>
                <section>
                    <p>Si la asincron√≠a no se maneja bien, el usuario no recibe feedback visual inmediato.</p>
                    <p>
                        üîπ La p√°gina parece inactiva mientras los datos se cargan. <br>
                        üîπ Si la API es lenta, el usuario podr√≠a pensar que la aplicaci√≥n est√° congelada.
                    </p>
                </section>
                <section>
                    <pre><code class="javascript">
// Inicia la solicitud de datos de Pok√©mon (no bloquea la interfaz)
const productos = fetch('https://pokeapi.co/api/v2/pokemon/')
    .then(response => response.json());

// Este mensaje se muestra inmediatamente, antes de que los datos lleguen
console.log("Cargando interfaz...");

// Cuando la promesa se resuelve, se imprime en la consola pero la UI no cambia
productos.then(data => {
    console.log("Datos cargados:", data.results);
});</code></pre>
                </section>
                <section>
                    <p>En lugar de esperar a que los datos se carguen para actualizar la UI, primero mostramos un mensaje de carga.</p>
                </section>
                <section>
                    <pre><code class="javascript">
document.body.innerHTML = "<h2>Cargando Pok√©mon...</h2>";

fetch('https://pokeapi.co/api/v2/pokemon/')
    .then(response => response.json())
    .then(data => {
        document.body.innerHTML = `<h2>Pok√©mon Cargados:</h2><ul>` + 
            data.results.map(pokemon => `<li>${pokemon.name}</li>`).join('') + 
            `</ul>`;
    })
    .catch(error => {
        document.body.innerHTML = "<h2>Error al cargar los datos.</h2>";
        console.error("Error:", error);
    });</code></pre>
                </section>
                <section>
                    <p>‚úÖ La interfaz se muestra de inmediato al usuario.</p>
                </section>
                <section>
                    <p>‚úÖ Los datos se cargan en segundo plano sin afectar la navegaci√≥n.</p>
                </section>
                <section>
                    <p>‚úÖ Si la API es lenta, el usuario puede seguir interactuando con la p√°gina.</p>
                </section>
            </section>

            <!-- Soluci√≥n -->
            <section>
                <h2> üí° <br>Soluci√≥n(es)</h2>
            </section>

            <!-- Promise API -->
            <section>
                <section>
                    <h2>Promise API</h2>
                </section>
                <section>
                    <p>Una Promesa representa el resultado eventual de una operaci√≥n as√≠ncrona.</p>
                </section>
                <section>
                    <p>Estados de una promesa:</p>
                    <ul>
                        <li>Pending (‚è≥ Pendiente)</li>
                        <li>Fulfilled (‚úÖ Completada)</li>
                        <li>Rejected (‚ùå Rechazada)</li>
                    </ul>
                </section>
                <section>
                    <h3>Ejemplo</h3>
                    <pre><code class="javascript">
const promesa = new Promise((resolve, reject) => {
    let exito = true;

    if (exito) {
        resolve("Operaci√≥n exitosa");
    } else {
        reject("Ocurri√≥ un error");
    }
});

promesa.then(console.log).catch(console.error);</code></pre>
                </section>
                <section>
                    <pre>
                        <code class="javascript">
function obtenerPokemones() {
    return new Promise((resolve, reject) => {
        fetch('https://pokeapi.co/api/v2/pokemon/')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Error HTTP: ${response.status}`);
                }
                return response.json();
            })
            .then(data => resolve(data.results))
            .catch(error => reject(error));
    });
}</code>
                    </pre>
                </section>
                <section>
                    <pre>
                        <code>
obtenerPokemones()
    .then(pokemones => console.log("Pok√©mon obtenidos:", pokemones))
    .catch(error => console.error("Error en la petici√≥n:", error));
                        </code>
                    </pre>
                </section>
                <section>
                    <h3>Encadenamiento de Promesas</h3>
                </section>
                <section>
                    <p>Podemos encadenar m√∫ltiples `.then()` para ejecutar operaciones en secuencia.</p>
                </section>
                <section>
                    <p>üîπ Cada `.then()` espera el resultado del anterior antes de ejecutarse.</p>
                </section>
            </section>

            <!-- Async/Await -->
            <section>
                <section>
                    <h2>Async/Await</h2>
                </section>
                <section>
                    <p>Async/Await es una forma moderna de manejar Promesas en JavaScript.</p>
                </section>
                <section>
                    <p>‚úÖ Hace que el c√≥digo sea m√°s legible y estructurado.</p>
                </section>
                <section>
                    <p>‚úÖ Permite manejar errores f√°cilmente con `try...catch`.</p>
                </section>
                <section>
                    <h3>C√≥mo funciona async</h3>
                </section>
                <section>
                    <p>Una funci√≥n declarada con async <b>siempre devuelve una promesa.</b></p>
                </section>
                <section>
                    <pre><code class="javascript">
async function obtenerMensaje() {
    return "Hola, mundo!";
}

obtenerMensaje().then(console.log); // "Hola, mundo!"</code></pre>
                </section>
                <section>
                    <h3>C√≥mo funciona await</h3>
                </section>
                <section>
                    <p>await <b>pausa la ejecuci√≥n</b> de la funci√≥n hasta que la Promesa se resuelva.</p>
                </section>
                <section>
                    <pre><code class="javascript">
async function obtenerDatos() {
    console.log("Iniciando petici√≥n...");

    let respuesta = await fetch('https://pokeapi.co/api/v2/pokemon/');
    let datos = await respuesta.json();
    
    console.log("Datos obtenidos:", datos.results);
}

obtenerDatos();</code></pre>
                </section>
                <section>
                    <p>‚úÖ Se evita el encadenamiento de <b>.then()</b>, haciendo el c√≥digo m√°s claro.</p>
                </section>
                <section>
                    <p>Con <b>try...catch</b>, podemos capturar errores en operaciones await.</p>
                </section>
                <section>
                    <pre><code class="javascript">
async function cargarDatos() {
    try {
        let respuesta = await fetch('https://pokeapi.co/api/v2/pokemon/');
        if (!respuesta.ok) throw new Error("Error en la API");
        let datos = await respuesta.json();
        
        console.log("Datos:", datos.results);
    } catch (error) {
        console.error("Error capturado:", error);
    }
}

cargarDatos();</code></pre>
                </section>
                <section>
                    <p>‚úÖ Manejo estructurado de errores sin necesidad de <b>.catch()</b> externo.</p>
                </section>
                <section>
                    <h3>Ejemplo de async/await con m√∫ltiples llamadas</h3>
                </section>
                <section>
                    <p>Podemos esperar m√∫ltiples promesas en simultaneo usando <b>await</b> y <b>Prmise.all()</b>.</p>
                </section>
                <section>
<pre><code class="javascript">
async function obtenerDatosDePokemon() {
    try {
        // Hacemos ambas peticiones en paralelo con Promise.all
        const [listaPokemonesResponse, gengarResponse] = await Promise.all([
            fetch('https://pokeapi.co/api/v2/pokemon/'),
            fetch('https://pokeapi.co/api/v2/pokemon/gengar')
        ]);

        // Verificamos si ambas respuestas son exitosas
        if (!listaPokemonesResponse.ok) {
            throw new Error(`Error HTTP en la lista de Pok√©mon:`);
        }
        if (!gengarResponse.ok) {
            throw new Error(`Error HTTP en el Pok√©mon Gengar`);
        }

        // Convertimos las respuestas a JSON
        const listaPokemones = await listaPokemonesResponse.json();
        const gengar = await gengarResponse.json();

        return { listaPokemones: listaPokemones.results, gengar };
    } catch (error) {
        console.error("Error en la petici√≥n:", error);
    }
}</code></pre>
                </section>
                <section>
                    <pre>
                        <code class="javascript">
obtenerDatosDePokemon().then(datos => {
    console.log("Lista de Pok√©mon:", datos.listaPokemones);
    console.log("Datos de Gengar:", datos.gengar);
});
                        </code>
                    </pre>
                </section>
            </section>

            <!-- Fetch API -->
            <section>
                <section>
                    <h2>Fetch API</h2>
                </section>
                <section>
                    <p>Fetch API permite realizar peticiones HTTP de manera as√≠ncrona.</p>
                </section>
                <section>
                    <p>‚úÖ M√°s moderno que `XMLHttpRequest`.</p>
                </section>
                <section>
                    <p>‚úÖ Devuelve una <b>Promesa.</b></p>
                </section>
                <section>
                    <h3>Ejemplo b√°sico de `fetch`</h3>
                </section>
                <section>
                    <pre><code class="javascript">
fetch('https://pokeapi.co/api/v2/pokemon/')
    .then(response => response.json())
    .then(data => console.log("Datos obtenidos:", data.results))
    .catch(error => console.error("Error en la petici√≥n:", error));</code></pre>
                </section>
                <section>
                    <h3>Manejo de respuestas HTTP</h3>
                </section>
                <section>
                    <p>Podemos verificar si una petici√≥n fue exitosa con `response.ok`.</p>
                </section>
                <section>
                    <pre><code class="javascript">
fetch('https://pokeapi.co/api/v2/pokemon/')
    .then(response => {
        if (!response.ok) {
            throw new Error(`Error HTTP: ${response.status}`);
        }
        return response.json();
    })
    .then(data => console.log("Datos obtenidos:", data.results))
    .catch(error => console.error("Error en la petici√≥n:", error));</code></pre>
                </section>
                <section>
                    <h3>Realizando una petici√≥n POST</h3>
                </section>
                <section>
                    <p>Podemos enviar datos a una API utilizando `fetch` con `POST`.</p>
                </section>
                <section>
                    <pre><code class="javascript">
fetch('https://api.example.com/data', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({ nombre: 'Juan', edad: 25 })
})
.then(response => response.json())
.then(data => console.log("Respuesta del servidor:", data))
.catch(error => console.error("Error en la petici√≥n:", error));</code></pre>
                </section>
                <section>
                    <h3>Usando `fetch` con Async/Await</h3>
                </section>
                <section>
                    <p>`fetch` se puede usar con `async/await` para mayor claridad.</p>
                </section>
                <section>
                    <pre><code class="javascript">
async function obtenerDatos() {
    try {
        const response = await fetch('https://pokeapi.co/api/v2/pokemon/');
        if (!response.ok) throw new Error(`Error HTTP: ${response.status}`);
        
        const datos = await response.json();
        console.log("Datos obtenidos:", datos.results);
    } catch (error) {
        console.error("Error capturado:", error);
    }
}

obtenerDatos();</code></pre>
                </section>
            </section>

            <!-- Desestructuraci√≥n de Objetos -->
            <section>
                <section>
                    <h2>Desestructuraci√≥n de Objetos</h2>
                </section>
                <section>
                    <p>La desestructuraci√≥n permite extraer valores de objetos y arrays f√°cilmente.</p>
                </section>
                <section>
                    <p>‚úÖ Hace el c√≥digo m√°s limpio y conciso.</p>
                </section>
                <section>
                    <h3>Ejemplo b√°sico de desestructuraci√≥n</h3>
                </section>
                <section>
                    <pre><code class="javascript">
const usuario = { nombre: "Juan", edad: 25, pais: "Espa√±a" };
const { nombre, edad } = usuario;

console.log(nombre, edad); // "Juan", 25</code></pre>
                </section>
                <section>
                    <h3>Uso en par√°metros de funciones</h3>
                </section>
                <section>
                    <p>Podemos extraer valores directamente en los par√°metros de una funci√≥n.</p>
                </section>
                <section>
                    <pre><code class="javascript">
function mostrarUsuario({ nombre, pais }) {
    console.log(`Nombre: ${nombre}, Pa√≠s: ${pais}`);
}

const persona = { nombre: "Ana", edad: 30, pais: "M√©xico" };
mostrarUsuario(persona);</code></pre>
                </section>
                <section>
                    <h3>Valores por defecto</h3>
                </section>
                <section>
                    <p>Podemos asignar valores por defecto en caso de que una propiedad no exista.</p>
                </section>
                <section>
                    <pre><code class="javascript">
const producto = { nombre: "Laptop", precio: 1000 };
const { nombre, stock = 10 } = producto;

console.log(stock); // 10 (valor por defecto)</code></pre>
                </section>
                <section>
                    <h3>Renombrando variables</h3>
                </section>
                <section>
                    <p>Podemos renombrar las variables extra√≠das con `:`.</p>
                </section>
                <section>
                    <pre><code class="javascript">
const usuario = { nombre: "Pedro", edad: 22 };
const { nombre: nombreUsuario, edad: edadUsuario } = usuario;

console.log(nombreUsuario, edadUsuario); // "Pedro", 22</code></pre>
                </section>
                <section>
                    <h3>Desestructuraci√≥n en arreglos</h3>
                </section>
                <section>
                    <p>Tambi√©n funciona con arreglos, asignando variables por posici√≥n.</p>
                </section>
                <section>
                    <pre><code class="javascript">
const colores = ["Rojo", "Verde", "Azul"];
const [primerColor, segundoColor] = colores;

console.log(primerColor, segundoColor); // "Rojo", "Verde"</code></pre>
                </section>
                <section>
                    <h3>Omitiendo valores en arreglos</h3>
                </section>
                <section>
                    <p>Podemos omitir valores utilizando `,`.</p>
                </section>
                <section>
                    <pre><code class="javascript">
const numeros = [1, 2, 3, 4, 5];
const [primero, , tercero] = numeros;

console.log(primero, tercero); // 1, 3</code></pre>
                </section>
                <section>
                    <h3>Uso en combinaci√≥n con `fetch`</h3>
                </section>
                <section>
                    <p>Podemos extraer datos directamente de respuestas JSON.</p>
                </section>
                <section>
                    <pre><code class="javascript">
async function obtenerPokemon() {
    const response = await fetch('https://pokeapi.co/api/v2/pokemon/');
    const data = await response.json();
    const {name, url} = data.results[0];

    console.log(`Nombre: ${name}, URL: ${url}`);
}

obtenerPokemon();</code></pre>
                </section>
                <section>
                    <p>‚úÖ Permite acceder a los datos de una API de manera r√°pida y clara.</p>
                </section>
            </section>

            <!-- Resumen -->
            <section>
                <section>
                    <h2>Resumen</h2>
                </section>
                <section>
                    <p>‚úÖ Promesas permiten manejar la asincron√≠a sin bloquear el c√≥digo.</p>
                </section>
                <section>
                    <p>‚úÖ Async/Await simplifica el uso de Promesas.</p>
                </section>
                <section>
                    <p>‚úÖ Fetch facilita la comunicaci√≥n con APIs.</p>
                </section>
                <section>
                    <p>‚úÖ Desestructuraci√≥n mejora la manipulaci√≥n de objetos en JavaScript.</p>
                </section>
            </section>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/highlight/highlight.js"></script>
    <script>
        Reveal.initialize({
            plugins: [RevealHighlight],
        });
    </script>
</body>
</html>
